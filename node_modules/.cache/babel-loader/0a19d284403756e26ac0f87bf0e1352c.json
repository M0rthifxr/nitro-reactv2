{"ast":null,"code":"import{HabboClubLevelEnum,RoomControllerLevel}from'@nitrots/nitro-renderer';import{useEffect,useState}from'react';import{GetAvatarRenderManager,GetClubMemberLevel,GetRoomSession,GetSessionDataManager,LocalizeText,MannequinUtilities}from'../../../../api';import{Base,Button,Column,Flex,LayoutAvatarImageView,LayoutCurrencyIcon,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{useFurnitureMannequinWidget}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const MODE_NONE=-1;const MODE_CONTROLLER=0;const MODE_UPDATE=1;const MODE_PEER=2;const MODE_NO_CLUB=3;const MODE_WRONG_GENDER=4;export const FurnitureMannequinView=props=>{const[renderedFigure,setRenderedFigure]=useState(null);const[mode,setMode]=useState(MODE_NONE);const{objectId=-1,figure=null,gender=null,clubLevel=HabboClubLevelEnum.NO_CLUB,name=null,setName=null,saveFigure=null,wearFigure=null,saveName=null,onClose=null}=useFurnitureMannequinWidget();useEffect(()=>{if(objectId===-1)return;const roomSession=GetRoomSession();if(roomSession.isRoomOwner||roomSession.controllerLevel>=RoomControllerLevel.GUEST||GetSessionDataManager().isModerator){setMode(MODE_CONTROLLER);return;}if(GetSessionDataManager().gender.toLowerCase()!==gender.toLowerCase()){setMode(MODE_WRONG_GENDER);return;}if(GetClubMemberLevel()<clubLevel){setMode(MODE_NO_CLUB);return;}setMode(MODE_PEER);},[objectId,gender,clubLevel]);useEffect(()=>{switch(mode){case MODE_CONTROLLER:case MODE_WRONG_GENDER:{const figureContainer=GetAvatarRenderManager().createFigureContainer(figure);MannequinUtilities.transformAsMannequinFigure(figureContainer);setRenderedFigure(figureContainer.getFigureString());break;}case MODE_UPDATE:{const figureContainer=GetAvatarRenderManager().createFigureContainer(GetSessionDataManager().figure);MannequinUtilities.transformAsMannequinFigure(figureContainer);setRenderedFigure(figureContainer.getFigureString());break;}case MODE_PEER:case MODE_NO_CLUB:{const figureContainer=MannequinUtilities.getMergedMannequinFigureContainer(GetSessionDataManager().figure,figure);setRenderedFigure(figureContainer.getFigureString());break;}}},[mode,figure,clubLevel]);if(objectId===-1)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-mannequin no-resize\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('mannequin.widget.title'),onCloseClick:onClose}),/*#__PURE__*/_jsx(NitroCardContentView,{center:true,children:/*#__PURE__*/_jsxs(Flex,{fullWidth:true,gap:2,overflow:\"hidden\",children:[/*#__PURE__*/_jsx(Column,{children:/*#__PURE__*/_jsxs(Base,{position:\"relative\",className:\"mannequin-preview\",children:[/*#__PURE__*/_jsx(LayoutAvatarImageView,{position:\"absolute\",figure:renderedFigure,direction:2}),clubLevel>0&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{className:\"position-absolute end-2 bottom-2\",type:\"hc\"})]})}),/*#__PURE__*/_jsxs(Column,{grow:true,justifyContent:\"between\",overflow:\"auto\",children:[mode===MODE_CONTROLLER&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:name,onChange:event=>setName(event.target.value),onBlur:saveName}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:event=>setMode(MODE_UPDATE),children:LocalizeText('mannequin.widget.style')}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:wearFigure,children:LocalizeText('mannequin.widget.wear')})]})]}),mode===MODE_UPDATE&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:name}),/*#__PURE__*/_jsx(Text,{wrap:true,children:LocalizeText('mannequin.widget.savetext')})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Text,{underline:true,pointer:true,onClick:event=>setMode(MODE_CONTROLLER),children:LocalizeText('mannequin.widget.back')}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:saveFigure,children:LocalizeText('mannequin.widget.save')})]})]}),mode===MODE_PEER&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:name}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('mannequin.widget.weartext')})]}),/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:wearFigure,children:LocalizeText('mannequin.widget.wear')})]}),mode===MODE_NO_CLUB&&/*#__PURE__*/_jsx(Flex,{center:true,grow:true,children:/*#__PURE__*/_jsx(Text,{children:LocalizeText('mannequin.widget.clubnotification')})}),mode===MODE_WRONG_GENDER&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('mannequin.widget.wronggender')})]})]})})]});};","map":null,"metadata":{},"sourceType":"module"}