{"ast":null,"code":"import{RoomEngineTriggerWidgetEvent}from'@nitrots/nitro-renderer';import classNames from'classnames';import{useEffect,useMemo,useState}from'react';import ReactSlider from'react-slider';import{ColorUtils,FurnitureDimmerUtilities,GetConfiguration,LocalizeText}from'../../../../api';import{Base,Button,Column,Flex,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardTabsItemView,NitroCardTabsView,NitroCardView,Text}from'../../../../common';import{useFurnitureDimmerWidget,useRoomEngineEvent}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const FurnitureDimmerView=props=>{const[isVisible,setIsVisible]=useState(false);const{presets=[],dimmerState=0,selectedPresetId=0,color=0xFFFFFF,brightness=0xFF,effectId=0,selectedColor=0,setSelectedColor=null,selectedBrightness=0,setSelectedBrightness=null,selectedEffectId=0,setSelectedEffectId=null,selectPresetId=null,applyChanges}=useFurnitureDimmerWidget();const onClose=()=>{FurnitureDimmerUtilities.previewDimmer(color,brightness,effectId===2);setIsVisible(false);};useRoomEngineEvent(RoomEngineTriggerWidgetEvent.REMOVE_DIMMER,event=>setIsVisible(false));useEffect(()=>{if(!presets||!presets.length)return;setIsVisible(true);},[presets]);const isFreeColorMode=useMemo(()=>GetConfiguration('widget.dimmer.colorwheel',false),[]);if(!isVisible)return null;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-room-widget-dimmer\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('widget.dimmer.title'),onCloseClick:onClose}),dimmerState===1&&/*#__PURE__*/_jsx(NitroCardTabsView,{children:presets.map(preset=>/*#__PURE__*/_jsx(NitroCardTabsItemView,{isActive:selectedPresetId===preset.id,onClick:event=>selectPresetId(preset.id),children:LocalizeText(`widget.dimmer.tab.${preset.id}`)},preset.id))}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[dimmerState===0&&/*#__PURE__*/_jsxs(Column,{alignItems:\"center\",children:[/*#__PURE__*/_jsx(Base,{className:\"dimmer-banner\"}),/*#__PURE__*/_jsx(Text,{center:true,className:\"bg-muted rounded p-1\",children:LocalizeText('widget.dimmer.info.off')}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"success\",onClick:()=>FurnitureDimmerUtilities.changeState(),children:LocalizeText('widget.dimmer.button.on')})]}),dimmerState===1&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",children:LocalizeText('widget.backgroundcolor.hue')}),isFreeColorMode&&/*#__PURE__*/_jsx(\"input\",{type:\"color\",className:\"form-control\",value:ColorUtils.makeColorNumberHex(selectedColor),onChange:event=>setSelectedColor(ColorUtils.convertFromHex(event.target.value))}),!isFreeColorMode&&/*#__PURE__*/_jsx(Grid,{gap:1,columnCount:7,children:FurnitureDimmerUtilities.AVAILABLE_COLORS.map((color,index)=>{return/*#__PURE__*/_jsx(Column,{fullWidth:true,pointer:true,className:'color-swatch rounded'+classNames({' active':color===selectedColor}),onClick:()=>setSelectedColor(color),style:{backgroundColor:FurnitureDimmerUtilities.HTML_COLORS[index]}},index);})})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{fontWeight:\"bold\",children:LocalizeText('widget.backgroundcolor.lightness')}),/*#__PURE__*/_jsx(ReactSlider,{className:\"nitro-slider\",min:FurnitureDimmerUtilities.MIN_BRIGHTNESS,max:FurnitureDimmerUtilities.MAX_BRIGHTNESS,value:selectedBrightness,onChange:value=>setSelectedBrightness(value),thumbClassName:'thumb percent',renderThumb:(props,state)=>/*#__PURE__*/_jsx(\"div\",{...props,children:FurnitureDimmerUtilities.scaleBrightness(state.valueNow)})})]}),/*#__PURE__*/_jsxs(Flex,{alignItems:\"center\",gap:1,children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",checked:selectedEffectId===2,onChange:event=>setSelectedEffectId(event.target.checked?2:1)}),/*#__PURE__*/_jsx(Text,{children:LocalizeText('widget.dimmer.type.checkbox')})]}),/*#__PURE__*/_jsxs(Flex,{gap:1,children:[/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"danger\",onClick:()=>FurnitureDimmerUtilities.changeState(),children:LocalizeText('widget.dimmer.button.off')}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"success\",onClick:applyChanges,children:LocalizeText('widget.dimmer.button.apply')})]})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}