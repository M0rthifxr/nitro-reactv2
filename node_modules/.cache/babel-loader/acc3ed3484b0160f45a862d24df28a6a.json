{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ChiiO\\\\Desktop\\\\nitro-reactdev\\\\src\\\\components\\\\avatar-editor\\\\AvatarEditorView.tsx\",\n    _s = $RefreshSig$();\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { AvatarEditorFigureCategory, FigureSetIdsMessageEvent, GetWardrobeMessageComposer, UserFigureComposer, UserWardrobePageEvent } from '@nitrots/nitro-renderer';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { AddEventLinkTracker, AvatarEditorAction, AvatarEditorUtilities, BodyModel, FigureData, generateRandomFigure, GetAvatarRenderManager, GetClubMemberLevel, GetConfiguration, GetSessionDataManager, HeadModel, LegModel, LocalizeText, RemoveLinkEventTracker, SendMessageComposer, TorsoModel } from '../../api';\nimport { Button, ButtonGroup, Column, Grid, NitroCardContentView, NitroCardHeaderView, NitroCardTabsItemView, NitroCardTabsView, NitroCardView } from '../../common';\nimport { useMessageEvent } from '../../hooks';\nimport { AvatarEditorFigurePreviewView } from './views/AvatarEditorFigurePreviewView';\nimport { AvatarEditorModelView } from './views/AvatarEditorModelView';\nimport { AvatarEditorWardrobeView } from './views/AvatarEditorWardrobeView';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DEFAULT_MALE_FIGURE = 'hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007';\nconst DEFAULT_FEMALE_FIGURE = 'hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68';\nexport const AvatarEditorView = props => {\n  _s();\n\n  const [isVisible, setIsVisible] = useState(false);\n  const [figures, setFigures] = useState(null);\n  const [figureData, setFigureData] = useState(null);\n  const [categories, setCategories] = useState(null);\n  const [activeCategory, setActiveCategory] = useState(null);\n  const [figureSetIds, setFigureSetIds] = useState([]);\n  const [boundFurnitureNames, setBoundFurnitureNames] = useState([]);\n  const [savedFigures, setSavedFigures] = useState([]);\n  const [isWardrobeVisible, setIsWardrobeVisible] = useState(false);\n  const [lastFigure, setLastFigure] = useState(null);\n  const [lastGender, setLastGender] = useState(null);\n  const [needsReset, setNeedsReset] = useState(true);\n  const [isInitalized, setIsInitalized] = useState(false);\n  const maxWardrobeSlots = useMemo(() => GetConfiguration('avatar.wardrobe.max.slots', 10), []);\n  useMessageEvent(FigureSetIdsMessageEvent, event => {\n    const parser = event.getParser();\n    setFigureSetIds(parser.figureSetIds);\n    setBoundFurnitureNames(parser.boundsFurnitureNames);\n  });\n  useMessageEvent(UserWardrobePageEvent, event => {\n    const parser = event.getParser();\n    const savedFigures = [];\n    let i = 0;\n\n    while (i < maxWardrobeSlots) {\n      savedFigures.push([null, null]);\n      i++;\n    }\n\n    for (let [index, [look, gender]] of parser.looks.entries()) {\n      const container = GetAvatarRenderManager().createFigureContainer(look);\n      savedFigures[index - 1] = [container, gender];\n    }\n\n    setSavedFigures(savedFigures);\n  });\n  const selectCategory = useCallback(name => {\n    if (!categories) return;\n    setActiveCategory(categories.get(name));\n  }, [categories]);\n  const resetCategories = useCallback(() => {\n    const categories = new Map();\n    categories.set(AvatarEditorFigureCategory.GENERIC, new BodyModel());\n    categories.set(AvatarEditorFigureCategory.HEAD, new HeadModel());\n    categories.set(AvatarEditorFigureCategory.TORSO, new TorsoModel());\n    categories.set(AvatarEditorFigureCategory.LEGS, new LegModel());\n    setCategories(categories);\n  }, []);\n  const setupFigures = useCallback(() => {\n    const figures = new Map();\n    const maleFigure = new FigureData();\n    const femaleFigure = new FigureData();\n    maleFigure.loadAvatarData(DEFAULT_MALE_FIGURE, FigureData.MALE);\n    femaleFigure.loadAvatarData(DEFAULT_FEMALE_FIGURE, FigureData.FEMALE);\n    figures.set(FigureData.MALE, maleFigure);\n    figures.set(FigureData.FEMALE, femaleFigure);\n    setFigures(figures);\n    setFigureData(figures.get(FigureData.MALE));\n  }, []);\n  const loadAvatarInEditor = useCallback(function (figure, gender) {\n    let reset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n    gender = AvatarEditorUtilities.getGender(gender);\n    let newFigureData = figureData;\n    if (gender !== newFigureData.gender) newFigureData = figures.get(gender);\n    if (figure !== newFigureData.getFigureString()) newFigureData.loadAvatarData(figure, gender);\n    if (newFigureData !== figureData) setFigureData(newFigureData);\n\n    if (reset) {\n      setLastFigure(figureData.getFigureString());\n      setLastGender(figureData.gender);\n    }\n  }, [figures, figureData]);\n  const processAction = useCallback(action => {\n    switch (action) {\n      case AvatarEditorAction.ACTION_CLEAR:\n        loadAvatarInEditor(figureData.getFigureStringWithFace(0, false), figureData.gender, false);\n        resetCategories();\n        return;\n\n      case AvatarEditorAction.ACTION_RESET:\n        loadAvatarInEditor(lastFigure, lastGender);\n        resetCategories();\n        return;\n\n      case AvatarEditorAction.ACTION_RANDOMIZE:\n        const figure = generateRandomFigure(figureData, figureData.gender, GetClubMemberLevel(), figureSetIds, [FigureData.FACE]);\n        loadAvatarInEditor(figure, figureData.gender, false);\n        resetCategories();\n        return;\n\n      case AvatarEditorAction.ACTION_SAVE:\n        SendMessageComposer(new UserFigureComposer(figureData.gender, figureData.getFigureString()));\n        setIsVisible(false);\n        return;\n    }\n  }, [figureData, lastFigure, lastGender, figureSetIds, loadAvatarInEditor, resetCategories]);\n  const setGender = useCallback(gender => {\n    gender = AvatarEditorUtilities.getGender(gender);\n    setFigureData(figures.get(gender));\n  }, [figures]);\n  useEffect(() => {\n    const linkTracker = {\n      linkReceived: url => {\n        const parts = url.split('/');\n        if (parts.length < 2) return;\n\n        switch (parts[1]) {\n          case 'show':\n            setIsVisible(true);\n            return;\n\n          case 'hide':\n            setIsVisible(false);\n            return;\n\n          case 'toggle':\n            setIsVisible(prevValue => !prevValue);\n            return;\n        }\n      },\n      eventUrlPrefix: 'avatar-editor/'\n    };\n    AddEventLinkTracker(linkTracker);\n    return () => RemoveLinkEventTracker(linkTracker);\n  }, []);\n  useEffect(() => {\n    setSavedFigures(new Array(maxWardrobeSlots));\n  }, [maxWardrobeSlots]);\n  useEffect(() => {\n    if (!isWardrobeVisible) return;\n    setActiveCategory(null);\n    SendMessageComposer(new GetWardrobeMessageComposer());\n  }, [isWardrobeVisible]);\n  useEffect(() => {\n    if (!activeCategory) return;\n    setIsWardrobeVisible(false);\n  }, [activeCategory]);\n  useEffect(() => {\n    if (!categories) return;\n    selectCategory(AvatarEditorFigureCategory.GENERIC);\n  }, [categories, selectCategory]);\n  useEffect(() => {\n    if (!figureData) return;\n    AvatarEditorUtilities.CURRENT_FIGURE = figureData;\n    resetCategories();\n    return () => AvatarEditorUtilities.CURRENT_FIGURE = null;\n  }, [figureData, resetCategories]);\n  useEffect(() => {\n    AvatarEditorUtilities.FIGURE_SET_IDS = figureSetIds;\n    AvatarEditorUtilities.BOUND_FURNITURE_NAMES = boundFurnitureNames;\n    resetCategories();\n    return () => {\n      AvatarEditorUtilities.FIGURE_SET_IDS = null;\n      AvatarEditorUtilities.BOUND_FURNITURE_NAMES = null;\n    };\n  }, [figureSetIds, boundFurnitureNames, resetCategories]);\n  useEffect(() => {\n    if (!isVisible) return;\n\n    if (!figures) {\n      setupFigures();\n      setIsInitalized(true);\n      return;\n    }\n  }, [isVisible, figures, setupFigures]);\n  useEffect(() => {\n    if (!isVisible || !isInitalized || !needsReset) return;\n    loadAvatarInEditor(GetSessionDataManager().figure, GetSessionDataManager().gender);\n    setNeedsReset(false);\n  }, [isVisible, isInitalized, needsReset, loadAvatarInEditor]);\n  useEffect(() => {\n    if (isVisible) return;\n    return () => {\n      setNeedsReset(true);\n    };\n  }, [isVisible]);\n  if (!isVisible || !figureData) return null;\n  return /*#__PURE__*/_jsxDEV(NitroCardView, {\n    uniqueKey: \"avatar-editor\",\n    className: \"nitro-avatar-editor\",\n    children: [/*#__PURE__*/_jsxDEV(NitroCardHeaderView, {\n      headerText: LocalizeText('avatareditor.title'),\n      onCloseClick: event => setIsVisible(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NitroCardTabsView, {\n      children: [categories && categories.size > 0 && Array.from(categories.keys()).map(category => {\n        const isActive = activeCategory && activeCategory.name === category;\n        return /*#__PURE__*/_jsxDEV(NitroCardTabsItemView, {\n          isActive: isActive,\n          onClick: event => selectCategory(category),\n          children: LocalizeText(`avatareditor.category.${category}`)\n        }, category, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 25\n        }, this);\n      }), /*#__PURE__*/_jsxDEV(NitroCardTabsItemView, {\n        isActive: isWardrobeVisible,\n        onClick: event => setIsWardrobeVisible(true),\n        children: LocalizeText('avatareditor.category.wardrobe')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NitroCardContentView, {\n      children: /*#__PURE__*/_jsxDEV(Grid, {\n        children: [/*#__PURE__*/_jsxDEV(Column, {\n          size: 9,\n          overflow: \"hidden\",\n          children: [activeCategory && !isWardrobeVisible && /*#__PURE__*/_jsxDEV(AvatarEditorModelView, {\n            model: activeCategory,\n            gender: figureData.gender,\n            setGender: setGender\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 29\n          }, this), isWardrobeVisible && /*#__PURE__*/_jsxDEV(AvatarEditorWardrobeView, {\n            figureData: figureData,\n            savedFigures: savedFigures,\n            setSavedFigures: setSavedFigures,\n            loadAvatarInEditor: loadAvatarInEditor\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Column, {\n          size: 3,\n          overflow: \"hidden\",\n          children: [/*#__PURE__*/_jsxDEV(AvatarEditorFigurePreviewView, {\n            figureData: figureData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Column, {\n            grow: true,\n            gap: 1,\n            children: [/*#__PURE__*/_jsxDEV(ButtonGroup, {\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                onClick: event => processAction(AvatarEditorAction.ACTION_RESET),\n                children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: \"undo\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 298,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                onClick: event => processAction(AvatarEditorAction.ACTION_CLEAR),\n                children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: \"trash\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 301,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                onClick: event => processAction(AvatarEditorAction.ACTION_RANDOMIZE),\n                children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                  icon: \"dice\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              className: \"w-100\",\n              variant: \"success\",\n              onClick: event => processAction(AvatarEditorAction.ACTION_SAVE),\n              children: LocalizeText('avatareditor.save')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 268,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AvatarEditorView, \"bkWjC6zGsjZ/wvsd+b7pVptL5BA=\", false, function () {\n  return [useMessageEvent, useMessageEvent];\n});\n\n_c = AvatarEditorView;\n\nvar _c;\n\n$RefreshReg$(_c, \"AvatarEditorView\");","map":{"version":3,"names":["FontAwesomeIcon","AvatarEditorFigureCategory","FigureSetIdsMessageEvent","GetWardrobeMessageComposer","UserFigureComposer","UserWardrobePageEvent","useCallback","useEffect","useMemo","useState","AddEventLinkTracker","AvatarEditorAction","AvatarEditorUtilities","BodyModel","FigureData","generateRandomFigure","GetAvatarRenderManager","GetClubMemberLevel","GetConfiguration","GetSessionDataManager","HeadModel","LegModel","LocalizeText","RemoveLinkEventTracker","SendMessageComposer","TorsoModel","Button","ButtonGroup","Column","Grid","NitroCardContentView","NitroCardHeaderView","NitroCardTabsItemView","NitroCardTabsView","NitroCardView","useMessageEvent","AvatarEditorFigurePreviewView","AvatarEditorModelView","AvatarEditorWardrobeView","DEFAULT_MALE_FIGURE","DEFAULT_FEMALE_FIGURE","AvatarEditorView","props","isVisible","setIsVisible","figures","setFigures","figureData","setFigureData","categories","setCategories","activeCategory","setActiveCategory","figureSetIds","setFigureSetIds","boundFurnitureNames","setBoundFurnitureNames","savedFigures","setSavedFigures","isWardrobeVisible","setIsWardrobeVisible","lastFigure","setLastFigure","lastGender","setLastGender","needsReset","setNeedsReset","isInitalized","setIsInitalized","maxWardrobeSlots","event","parser","getParser","boundsFurnitureNames","i","push","index","look","gender","looks","entries","container","createFigureContainer","selectCategory","name","get","resetCategories","Map","set","GENERIC","HEAD","TORSO","LEGS","setupFigures","maleFigure","femaleFigure","loadAvatarData","MALE","FEMALE","loadAvatarInEditor","figure","reset","getGender","newFigureData","getFigureString","processAction","action","ACTION_CLEAR","getFigureStringWithFace","ACTION_RESET","ACTION_RANDOMIZE","FACE","ACTION_SAVE","setGender","linkTracker","linkReceived","url","parts","split","length","prevValue","eventUrlPrefix","Array","CURRENT_FIGURE","FIGURE_SET_IDS","BOUND_FURNITURE_NAMES","size","from","keys","map","category","isActive"],"sources":["C:/Users/ChiiO/Desktop/nitro-reactdev/src/components/avatar-editor/AvatarEditorView.tsx"],"sourcesContent":["import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { AvatarEditorFigureCategory, FigureSetIdsMessageEvent, GetWardrobeMessageComposer, IAvatarFigureContainer, ILinkEventTracker, UserFigureComposer, UserWardrobePageEvent } from '@nitrots/nitro-renderer';\r\nimport { FC, useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { AddEventLinkTracker, AvatarEditorAction, AvatarEditorUtilities, BodyModel, FigureData, generateRandomFigure, GetAvatarRenderManager, GetClubMemberLevel, GetConfiguration, GetSessionDataManager, HeadModel, IAvatarEditorCategoryModel, LegModel, LocalizeText, RemoveLinkEventTracker, SendMessageComposer, TorsoModel } from '../../api';\r\nimport { Button, ButtonGroup, Column, Grid, NitroCardContentView, NitroCardHeaderView, NitroCardTabsItemView, NitroCardTabsView, NitroCardView } from '../../common';\r\nimport { useMessageEvent } from '../../hooks';\r\nimport { AvatarEditorFigurePreviewView } from './views/AvatarEditorFigurePreviewView';\r\nimport { AvatarEditorModelView } from './views/AvatarEditorModelView';\r\nimport { AvatarEditorWardrobeView } from './views/AvatarEditorWardrobeView';\r\n\r\nconst DEFAULT_MALE_FIGURE: string = 'hr-100.hd-180-7.ch-215-66.lg-270-79.sh-305-62.ha-1002-70.wa-2007';\r\nconst DEFAULT_FEMALE_FIGURE: string = 'hr-515-33.hd-600-1.ch-635-70.lg-716-66-62.sh-735-68';\r\n\r\nexport const AvatarEditorView: FC<{}> = props =>\r\n{\r\n    const [ isVisible, setIsVisible ] = useState(false);\r\n    const [ figures, setFigures ] = useState<Map<string, FigureData>>(null);\r\n    const [ figureData, setFigureData ] = useState<FigureData>(null);\r\n    const [ categories, setCategories ] = useState<Map<string, IAvatarEditorCategoryModel>>(null);\r\n    const [ activeCategory, setActiveCategory ] = useState<IAvatarEditorCategoryModel>(null);\r\n    const [ figureSetIds, setFigureSetIds ] = useState<number[]>([]);\r\n    const [ boundFurnitureNames, setBoundFurnitureNames ] = useState<string[]>([]);\r\n    const [ savedFigures, setSavedFigures ] = useState<[ IAvatarFigureContainer, string ][]>([]);\r\n    const [ isWardrobeVisible, setIsWardrobeVisible ] = useState(false);\r\n    const [ lastFigure, setLastFigure ] = useState<string>(null);\r\n    const [ lastGender, setLastGender ] = useState<string>(null);\r\n    const [ needsReset, setNeedsReset ] = useState(true);\r\n    const [ isInitalized, setIsInitalized ] = useState(false);\r\n\r\n    const maxWardrobeSlots = useMemo(() => GetConfiguration<number>('avatar.wardrobe.max.slots', 10), []);\r\n\r\n    useMessageEvent<FigureSetIdsMessageEvent>(FigureSetIdsMessageEvent, event =>\r\n    {\r\n        const parser = event.getParser();\r\n\r\n        setFigureSetIds(parser.figureSetIds);\r\n        setBoundFurnitureNames(parser.boundsFurnitureNames);\r\n    });\r\n\r\n    useMessageEvent<UserWardrobePageEvent>(UserWardrobePageEvent, event =>\r\n    {\r\n        const parser = event.getParser();\r\n        const savedFigures: [ IAvatarFigureContainer, string ][] = [];\r\n\r\n        let i = 0;\r\n\r\n        while(i < maxWardrobeSlots)\r\n        {\r\n            savedFigures.push([ null, null ]);\r\n\r\n            i++;\r\n        }\r\n\r\n        for(let [ index, [ look, gender ] ] of parser.looks.entries())\r\n        {\r\n            const container = GetAvatarRenderManager().createFigureContainer(look);\r\n\r\n            savedFigures[(index - 1)] = [ container, gender ];\r\n        }\r\n\r\n        setSavedFigures(savedFigures);\r\n    });\r\n\r\n    const selectCategory = useCallback((name: string) =>\r\n    {\r\n        if(!categories) return;\r\n        \r\n        setActiveCategory(categories.get(name));\r\n    }, [ categories ]);\r\n\r\n    const resetCategories = useCallback(() =>\r\n    {\r\n        const categories = new Map();\r\n\r\n        categories.set(AvatarEditorFigureCategory.GENERIC, new BodyModel());\r\n        categories.set(AvatarEditorFigureCategory.HEAD, new HeadModel());\r\n        categories.set(AvatarEditorFigureCategory.TORSO, new TorsoModel());\r\n        categories.set(AvatarEditorFigureCategory.LEGS, new LegModel());\r\n\r\n        setCategories(categories);\r\n    }, []);\r\n\r\n    const setupFigures = useCallback(() =>\r\n    {\r\n        const figures: Map<string, FigureData> = new Map();\r\n\r\n        const maleFigure = new FigureData();\r\n        const femaleFigure = new FigureData();\r\n\r\n        maleFigure.loadAvatarData(DEFAULT_MALE_FIGURE, FigureData.MALE);\r\n        femaleFigure.loadAvatarData(DEFAULT_FEMALE_FIGURE, FigureData.FEMALE);\r\n\r\n        figures.set(FigureData.MALE, maleFigure);\r\n        figures.set(FigureData.FEMALE, femaleFigure);\r\n\r\n        setFigures(figures);\r\n        setFigureData(figures.get(FigureData.MALE));\r\n    }, []);\r\n\r\n    const loadAvatarInEditor = useCallback((figure: string, gender: string, reset: boolean = true) =>\r\n    {\r\n        gender = AvatarEditorUtilities.getGender(gender);\r\n\r\n        let newFigureData = figureData;\r\n\r\n        if(gender !== newFigureData.gender) newFigureData = figures.get(gender);\r\n\r\n        if(figure !== newFigureData.getFigureString()) newFigureData.loadAvatarData(figure, gender);\r\n\r\n        if(newFigureData !== figureData) setFigureData(newFigureData);\r\n\r\n        if(reset)\r\n        {\r\n            setLastFigure(figureData.getFigureString());\r\n            setLastGender(figureData.gender);\r\n        }\r\n    }, [ figures, figureData ]);\r\n\r\n    const processAction = useCallback((action: string) =>\r\n    {\r\n        switch(action)\r\n        {\r\n            case AvatarEditorAction.ACTION_CLEAR:\r\n                loadAvatarInEditor(figureData.getFigureStringWithFace(0, false), figureData.gender, false);\r\n                resetCategories();\r\n                return;\r\n            case AvatarEditorAction.ACTION_RESET:\r\n                loadAvatarInEditor(lastFigure, lastGender);\r\n                resetCategories();\r\n                return;\r\n            case AvatarEditorAction.ACTION_RANDOMIZE:\r\n                const figure = generateRandomFigure(figureData, figureData.gender, GetClubMemberLevel(), figureSetIds, [ FigureData.FACE ]);\r\n\r\n                loadAvatarInEditor(figure, figureData.gender, false);\r\n                resetCategories();\r\n                return;\r\n            case AvatarEditorAction.ACTION_SAVE:\r\n                SendMessageComposer(new UserFigureComposer(figureData.gender, figureData.getFigureString()));\r\n                setIsVisible(false);\r\n                return;\r\n        }\r\n    }, [ figureData, lastFigure, lastGender, figureSetIds, loadAvatarInEditor, resetCategories ])\r\n\r\n    const setGender = useCallback((gender: string) =>\r\n    {\r\n        gender = AvatarEditorUtilities.getGender(gender);\r\n\r\n        setFigureData(figures.get(gender));\r\n    }, [ figures ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        const linkTracker: ILinkEventTracker = {\r\n            linkReceived: (url: string) =>\r\n            {\r\n                const parts = url.split('/');\r\n        \r\n                if(parts.length < 2) return;\r\n        \r\n                switch(parts[1])\r\n                {\r\n                    case 'show':\r\n                        setIsVisible(true);\r\n                        return;\r\n                    case 'hide':\r\n                        setIsVisible(false);\r\n                        return;\r\n                    case 'toggle':\r\n                        setIsVisible(prevValue => !prevValue);\r\n                        return;\r\n                }\r\n            },\r\n            eventUrlPrefix: 'avatar-editor/'\r\n        };\r\n\r\n        AddEventLinkTracker(linkTracker);\r\n\r\n        return () => RemoveLinkEventTracker(linkTracker);\r\n    }, []);\r\n\r\n    useEffect(() =>\r\n    {\r\n        setSavedFigures(new Array(maxWardrobeSlots));\r\n    }, [ maxWardrobeSlots ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!isWardrobeVisible) return;\r\n\r\n        setActiveCategory(null);\r\n        SendMessageComposer(new GetWardrobeMessageComposer());\r\n    }, [ isWardrobeVisible ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!activeCategory) return;\r\n\r\n        setIsWardrobeVisible(false);\r\n    }, [ activeCategory ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!categories) return;\r\n\r\n        selectCategory(AvatarEditorFigureCategory.GENERIC);\r\n    }, [ categories, selectCategory ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!figureData) return;\r\n\r\n        AvatarEditorUtilities.CURRENT_FIGURE = figureData;\r\n\r\n        resetCategories();\r\n\r\n        return () => AvatarEditorUtilities.CURRENT_FIGURE = null;\r\n    }, [ figureData, resetCategories ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        AvatarEditorUtilities.FIGURE_SET_IDS = figureSetIds;\r\n        AvatarEditorUtilities.BOUND_FURNITURE_NAMES = boundFurnitureNames;\r\n\r\n        resetCategories();\r\n\r\n        return () =>\r\n        {\r\n            AvatarEditorUtilities.FIGURE_SET_IDS = null;\r\n            AvatarEditorUtilities.BOUND_FURNITURE_NAMES = null;\r\n        }\r\n    }, [ figureSetIds, boundFurnitureNames, resetCategories ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!isVisible) return;\r\n\r\n        if(!figures)\r\n        {\r\n            setupFigures();\r\n\r\n            setIsInitalized(true);\r\n\r\n            return;\r\n        }\r\n    }, [ isVisible, figures, setupFigures ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(!isVisible || !isInitalized || !needsReset) return;\r\n\r\n        loadAvatarInEditor(GetSessionDataManager().figure, GetSessionDataManager().gender);\r\n        setNeedsReset(false);\r\n    }, [ isVisible, isInitalized, needsReset, loadAvatarInEditor ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        if(isVisible) return;\r\n\r\n        return () =>\r\n        {\r\n            setNeedsReset(true);\r\n        }\r\n    }, [ isVisible ]);\r\n\r\n    if(!isVisible || !figureData) return null;\r\n\r\n    return (\r\n        <NitroCardView uniqueKey=\"avatar-editor\" className=\"nitro-avatar-editor\">\r\n            <NitroCardHeaderView headerText={ LocalizeText('avatareditor.title') } onCloseClick={ event => setIsVisible(false) } />\r\n            <NitroCardTabsView>\r\n                { categories && (categories.size > 0) && Array.from(categories.keys()).map(category =>\r\n                {\r\n                    const isActive = (activeCategory && (activeCategory.name === category));\r\n\r\n                    return (\r\n                        <NitroCardTabsItemView key={ category } isActive={ isActive } onClick={ event => selectCategory(category) }>\r\n                            { LocalizeText(`avatareditor.category.${ category }`) }\r\n                        </NitroCardTabsItemView>\r\n                    );\r\n                }) }\r\n                <NitroCardTabsItemView isActive={ isWardrobeVisible } onClick={ event => setIsWardrobeVisible(true) }>\r\n                    { LocalizeText('avatareditor.category.wardrobe') }\r\n                </NitroCardTabsItemView>\r\n            </NitroCardTabsView>\r\n            <NitroCardContentView>\r\n                <Grid>\r\n                    <Column size={ 9 } overflow=\"hidden\">\r\n                        { (activeCategory && !isWardrobeVisible) &&\r\n                            <AvatarEditorModelView model={ activeCategory } gender={ figureData.gender } setGender={ setGender } /> }\r\n                        { isWardrobeVisible &&\r\n                            <AvatarEditorWardrobeView figureData={ figureData } savedFigures={ savedFigures } setSavedFigures={ setSavedFigures } loadAvatarInEditor={ loadAvatarInEditor } /> }\r\n                    </Column>\r\n                    <Column size={ 3 } overflow=\"hidden\">\r\n                        <AvatarEditorFigurePreviewView figureData={ figureData } />\r\n                        <Column grow gap={ 1 }>\r\n                            <ButtonGroup>\r\n                                <Button variant=\"secondary\" onClick={ event => processAction(AvatarEditorAction.ACTION_RESET) }>\r\n                                    <FontAwesomeIcon icon=\"undo\" />\r\n                                </Button>\r\n                                <Button variant=\"secondary\" onClick={ event => processAction(AvatarEditorAction.ACTION_CLEAR) }>\r\n                                    <FontAwesomeIcon icon=\"trash\" />\r\n                                </Button>\r\n                                <Button variant=\"secondary\" onClick={ event => processAction(AvatarEditorAction.ACTION_RANDOMIZE) }>\r\n                                    <FontAwesomeIcon icon=\"dice\" />\r\n                                </Button>\r\n                            </ButtonGroup>\r\n                            <Button className=\"w-100\" variant=\"success\" onClick={ event => processAction(AvatarEditorAction.ACTION_SAVE) }>\r\n                                { LocalizeText('avatareditor.save') }\r\n                            </Button>\r\n                        </Column>\r\n                    </Column>\r\n                </Grid>\r\n            </NitroCardContentView>\r\n        </NitroCardView>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}