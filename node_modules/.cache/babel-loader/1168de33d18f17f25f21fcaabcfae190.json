{"ast":null,"code":"import{useEffect,useState}from'react';import{AddEventLinkTracker,LocalizeText,RemoveLinkEventTracker,ReportState}from'../../api';import{Base,Column,Grid,NitroCardContentView,NitroCardHeaderView,NitroCardView}from'../../common';import{useHelp}from'../../hooks';import{DescribeReportView}from'./views/DescribeReportView';import{HelpIndexView}from'./views/HelpIndexView';import{NameChangeView}from'./views/name-change/NameChangeView';import{ReportSummaryView}from'./views/ReportSummaryView';import{SanctionSatusView}from'./views/SanctionStatusView';import{SelectReportedChatsView}from'./views/SelectReportedChatsView';import{SelectReportedUserView}from'./views/SelectReportedUserView';import{SelectTopicView}from'./views/SelectTopicView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const HelpView=props=>{const[isVisible,setIsVisible]=useState(false);const{activeReport=null,setActiveReport=null,report=null}=useHelp();const onClose=()=>{setActiveReport(null);setIsVisible(false);};useEffect(()=>{const linkTracker={linkReceived:url=>{const parts=url.split('/');if(parts.length<2)return;switch(parts[1]){case'show':setIsVisible(true);return;case'hide':setIsVisible(false);return;case'toggle':setIsVisible(prevValue=>!prevValue);return;case'tour':// todo: launch tour\nreturn;case'report':if(parts.length>=5&&parts[2]==='room'){const roomId=parseInt(parts[3]);const unknown=unescape(parts.splice(4).join('/'));//this.reportRoom(roomId, unknown, \"\");\n}return;}},eventUrlPrefix:'help/'};AddEventLinkTracker(linkTracker);return()=>RemoveLinkEventTracker(linkTracker);},[]);useEffect(()=>{if(!activeReport)return;setIsVisible(true);},[activeReport]);const CurrentStepView=()=>{if(activeReport){switch(activeReport.currentStep){case ReportState.SELECT_USER:return/*#__PURE__*/_jsx(SelectReportedUserView,{});case ReportState.SELECT_CHATS:return/*#__PURE__*/_jsx(SelectReportedChatsView,{});case ReportState.SELECT_TOPICS:return/*#__PURE__*/_jsx(SelectTopicView,{});case ReportState.INPUT_REPORT_MESSAGE:return/*#__PURE__*/_jsx(DescribeReportView,{});case ReportState.REPORT_SUMMARY:return/*#__PURE__*/_jsx(ReportSummaryView,{});}}return/*#__PURE__*/_jsx(HelpIndexView,{});};return/*#__PURE__*/_jsxs(_Fragment,{children:[isVisible&&/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-help\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText('help.button.cfh'),onCloseClick:onClose}),/*#__PURE__*/_jsx(NitroCardContentView,{className:\"text-black\",children:/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(Column,{center:true,size:5,overflow:\"hidden\",children:/*#__PURE__*/_jsx(Base,{className:\"index-image\"})}),/*#__PURE__*/_jsx(Column,{justifyContent:\"between\",size:7,overflow:\"hidden\",children:/*#__PURE__*/_jsx(CurrentStepView,{})})]})})]}),/*#__PURE__*/_jsx(SanctionSatusView,{}),/*#__PURE__*/_jsx(NameChangeView,{})]});};","map":null,"metadata":{},"sourceType":"module"}