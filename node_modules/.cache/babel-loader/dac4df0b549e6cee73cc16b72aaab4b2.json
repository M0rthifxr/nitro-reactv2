{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ChiiO\\\\Desktop\\\\nitro-reactdev\\\\src\\\\components\\\\nitropedia\\\\NitropediaView.tsx\",\n    _s = $RefreshSig$();\n\nimport { NitroLogger } from '@nitrots/nitro-renderer';\nimport { useCallback, useEffect, useRef, useState } from 'react';\nimport { AddEventLinkTracker, GetConfiguration, OpenUrl, RemoveLinkEventTracker } from '../../api';\nimport { Base, NitroCardContentView, NitroCardHeaderView, NitroCardView } from '../../common';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NEW_LINE_REGEX = /\\n\\r|\\n|\\r/mg;\nexport const NitropediaView = props => {\n  _s();\n\n  const [content, setContent] = useState(null);\n  const [header, setHeader] = useState('');\n  const [dimensions, setDimensions] = useState(null);\n  const elementRef = useRef(null);\n  const openPage = useCallback(async link => {\n    try {\n      const response = await fetch(link);\n      if (!response) return;\n      const text = await response.text();\n      const splitData = text.split(NEW_LINE_REGEX);\n      const line = splitData.shift().split('|');\n      setHeader(line[0]);\n      setDimensions(prevValue => {\n        if (line[1] && line[1].split(';').length === 2) {\n          return {\n            width: parseInt(line[1].split(';')[0]),\n            height: parseInt(line[1].split(';')[1])\n          };\n        }\n\n        return null;\n      });\n      setContent(splitData.join(''));\n    } catch (error) {\n      NitroLogger.error(`Failed to fetch ${link}`);\n    }\n  }, []);\n  useEffect(() => {\n    const linkTracker = {\n      linkReceived: url => {\n        const value = url.split('/');\n        if (value.length < 2) return;\n        value.shift();\n        openPage(GetConfiguration('habbopages.url') + value.join('/'));\n      },\n      eventUrlPrefix: 'habbopages/'\n    };\n    AddEventLinkTracker(linkTracker);\n    return () => RemoveLinkEventTracker(linkTracker);\n  }, [openPage]);\n  useEffect(() => {\n    const handle = event => {\n      if (!(event.target instanceof HTMLAnchorElement)) return;\n      event.preventDefault();\n      const link = event.target.href;\n      if (!link || !link.length) return;\n      OpenUrl(link);\n    };\n\n    document.addEventListener('click', handle);\n    return () => {\n      document.removeEventListener('click', handle);\n    };\n  }, []);\n  if (!content) return null;\n  return /*#__PURE__*/_jsxDEV(NitroCardView, {\n    className: \"nitropedia\",\n    theme: \"primary-slim\",\n    style: dimensions ? {\n      width: dimensions.width,\n      height: dimensions.height\n    } : {},\n    children: [/*#__PURE__*/_jsxDEV(NitroCardHeaderView, {\n      headerText: header,\n      onCloseClick: () => setContent(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(NitroCardContentView, {\n      children: /*#__PURE__*/_jsxDEV(Base, {\n        fit: true,\n        innerRef: elementRef,\n        className: \"text-black\",\n        dangerouslySetInnerHTML: {\n          __html: content\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n};\n\n_s(NitropediaView, \"+0mkD6O3b2mCLAd65wcFpybfeDQ=\");\n\n_c = NitropediaView;\n\nvar _c;\n\n$RefreshReg$(_c, \"NitropediaView\");","map":{"version":3,"names":["NitroLogger","useCallback","useEffect","useRef","useState","AddEventLinkTracker","GetConfiguration","OpenUrl","RemoveLinkEventTracker","Base","NitroCardContentView","NitroCardHeaderView","NitroCardView","NEW_LINE_REGEX","NitropediaView","props","content","setContent","header","setHeader","dimensions","setDimensions","elementRef","openPage","link","response","fetch","text","splitData","split","line","shift","prevValue","length","width","parseInt","height","join","error","linkTracker","linkReceived","url","value","eventUrlPrefix","handle","event","target","HTMLAnchorElement","preventDefault","href","document","addEventListener","removeEventListener","__html"],"sources":["C:/Users/ChiiO/Desktop/nitro-reactdev/src/components/nitropedia/NitropediaView.tsx"],"sourcesContent":["import { ILinkEventTracker, NitroLogger } from '@nitrots/nitro-renderer';\r\nimport { FC, useCallback, useEffect, useRef, useState } from 'react';\r\nimport { AddEventLinkTracker, GetConfiguration, OpenUrl, RemoveLinkEventTracker } from '../../api';\r\nimport { Base, NitroCardContentView, NitroCardHeaderView, NitroCardView } from '../../common';\r\n\r\nconst NEW_LINE_REGEX = /\\n\\r|\\n|\\r/mg;\r\n\r\nexport const NitropediaView: FC<{}> = props =>\r\n{\r\n    const [ content, setContent ] = useState<string>(null);\r\n    const [ header, setHeader ] = useState<string>('');\r\n    const [ dimensions, setDimensions ] = useState<{ width: number, height: number }>(null);\r\n    const elementRef = useRef<HTMLDivElement>(null);\r\n    \r\n    const openPage = useCallback(async (link: string) =>\r\n    {\r\n        try\r\n        {\r\n            const response = await fetch(link);\r\n\r\n            if(!response) return;\r\n    \r\n            const text = await response.text();\r\n            const splitData = text.split(NEW_LINE_REGEX);\r\n            const line = splitData.shift().split('|');\r\n\r\n            setHeader(line[0]);\r\n\r\n            setDimensions(prevValue =>\r\n            {\r\n                if(line[1] && (line[1].split(';').length === 2))\r\n                {\r\n                    return {\r\n                        width: parseInt(line[1].split(';')[0]),\r\n                        height: parseInt(line[1].split(';')[1])\r\n                    }\r\n                }\r\n\r\n                return null;\r\n            });\r\n\r\n            setContent(splitData.join(''));\r\n        }\r\n\r\n        catch (error)\r\n        {\r\n            NitroLogger.error(`Failed to fetch ${ link }`);\r\n        }\r\n    }, []);\r\n\r\n    useEffect(() =>\r\n    {\r\n        const linkTracker: ILinkEventTracker = {\r\n            linkReceived: (url: string) =>\r\n            {\r\n                const value = url.split('/');\r\n\r\n                if(value.length < 2) return;\r\n\r\n                value.shift();\r\n\r\n                openPage(GetConfiguration<string>('habbopages.url') + value.join('/'));\r\n            },\r\n            eventUrlPrefix: 'habbopages/'\r\n        };\r\n\r\n        AddEventLinkTracker(linkTracker);\r\n\r\n        return () => RemoveLinkEventTracker(linkTracker);\r\n    }, [ openPage ]);\r\n\r\n    useEffect(() =>\r\n    {\r\n        const handle = (event: MouseEvent) =>\r\n        {\r\n            if(!(event.target instanceof HTMLAnchorElement)) return;\r\n\r\n            event.preventDefault();\r\n\r\n            const link = event.target.href;\r\n\r\n            if(!link || !link.length) return;\r\n\r\n            OpenUrl(link);\r\n        }\r\n\r\n        document.addEventListener('click', handle);\r\n\r\n        return () =>\r\n        {\r\n            document.removeEventListener('click', handle);\r\n        }\r\n    }, []);\r\n\r\n    if(!content) return null;\r\n\r\n    return (\r\n        <NitroCardView className=\"nitropedia\" theme=\"primary-slim\" style={ dimensions ? { width: dimensions.width, height: dimensions.height } : {} }>\r\n            <NitroCardHeaderView headerText={ header } onCloseClick={ () => setContent(null) }/>\r\n            <NitroCardContentView>\r\n                <Base fit innerRef={ elementRef } className=\"text-black\" dangerouslySetInnerHTML={ { __html: content } } />\r\n            </NitroCardContentView>\r\n        </NitroCardView>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}