{"ast":null,"code":"import{GetRoomAdPurchaseInfoComposer,GetUserEventCatsMessageComposer,PurchaseRoomAdMessageComposer,RoomAdPurchaseInfoEvent,UserEventCatsEvent}from'@nitrots/nitro-renderer';import{useCallback,useEffect,useState}from'react';import{LocalizeText,SendMessageComposer}from'../../../../../api';import{Base,Button,Column,Text}from'../../../../../common';import{useMessageEvent}from'../../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const CatalogLayoutRoomAdsView=props=>{const{page=null}=props;const[eventName,setEventName]=useState('');const[eventDesc,setEventDesc]=useState('');const[roomId,setRoomId]=useState(-1);const[availableRooms,setAvailableRooms]=useState([]);const[extended,setExtended]=useState(false);const[categoryId,setCategoryId]=useState(1);const[categories,setCategories]=useState(null);useMessageEvent(RoomAdPurchaseInfoEvent,event=>{const parser=event.getParser();if(!parser)return;setAvailableRooms(parser.rooms);});const purchaseAd=useCallback(()=>{const pageId=page.pageId;const offerId=page.offers.length>=1?page.offers[0].offerId:-1;const flatId=roomId;const name=eventName;const desc=eventDesc;const catId=categoryId;SendMessageComposer(new PurchaseRoomAdMessageComposer(pageId,offerId,flatId,name,extended,desc,catId));},[categoryId,eventDesc,eventName,extended,page.offers,page.pageId,roomId]);useMessageEvent(UserEventCatsEvent,event=>{const parser=event.getParser();setCategories(parser.categories);});useEffect(()=>{SendMessageComposer(new GetRoomAdPurchaseInfoComposer());// TODO: someone needs to fix this for morningstar\nSendMessageComposer(new GetUserEventCatsMessageComposer());},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Text,{bold:true,center:true,children:LocalizeText('roomad.catalog_header')}),/*#__PURE__*/_jsxs(Column,{size:12,overflow:\"hidden\",className:\"text-black\",children:[/*#__PURE__*/_jsx(Base,{children:LocalizeText('roomad.catalog_text')}),/*#__PURE__*/_jsxs(Base,{className:\"bg-muted rounded p-1\",children:[/*#__PURE__*/_jsx(Column,{gap:2,children:/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",value:categoryId,onChange:event=>setCategoryId(parseInt(event.target.value)),children:categories&&categories.map((cat,index)=>/*#__PURE__*/_jsx(\"option\",{value:cat.id,children:cat.name},index))})}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('roomad.catalog_name')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:64,value:eventName,onChange:event=>setEventName(event.target.value)})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('roomad.catalog_description')}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control form-control-sm\",maxLength:64,value:eventDesc,onChange:event=>setEventDesc(event.target.value)})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:LocalizeText('roomad.catalog_roomname')}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",value:roomId,onChange:event=>setRoomId(parseInt(event.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:-1,disabled:true,children:LocalizeText('roomad.catalog_roomname')}),availableRooms&&availableRooms.map((room,index)=>/*#__PURE__*/_jsx(\"option\",{value:room.roomId,children:room.roomName},index))]})]}),/*#__PURE__*/_jsx(Column,{gap:1,children:/*#__PURE__*/_jsx(Button,{onClick:purchaseAd,children:LocalizeText('buy')})})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}