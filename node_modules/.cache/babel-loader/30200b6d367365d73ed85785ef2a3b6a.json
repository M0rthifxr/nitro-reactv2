{"ast":null,"code":"import{useCallback,useEffect,useState}from'react';import{FigureData}from'../../../api';import{Column,Flex,Grid}from'../../../common';import{AvatarEditorIcon}from'./AvatarEditorIcon';import{AvatarEditorFigureSetView}from'./figure-set/AvatarEditorFigureSetView';import{AvatarEditorPaletteSetView}from'./palette-set/AvatarEditorPaletteSetView';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const AvatarEditorModelView=props=>{const{model=null,gender=null,setGender=null}=props;const[activeCategory,setActiveCategory]=useState(null);const[maxPaletteCount,setMaxPaletteCount]=useState(1);const selectCategory=useCallback(name=>{const category=model.categories.get(name);if(!category)return;category.init();setActiveCategory(category);for(const part of category.parts){if(!part||!part.isSelected)continue;setMaxPaletteCount(part.maxColorIndex||1);break;}},[model]);useEffect(()=>{model.init();for(const name of model.categories.keys()){selectCategory(name);break;}},[model,selectCategory]);if(!model||!activeCategory)return null;return/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsxs(Column,{size:2,children:[model.canSetGender&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Flex,{center:true,pointer:true,className:\"category-item\",onClick:event=>setGender(FigureData.MALE),children:/*#__PURE__*/_jsx(AvatarEditorIcon,{icon:\"male\",selected:gender===FigureData.MALE})}),/*#__PURE__*/_jsx(Flex,{center:true,pointer:true,className:\"category-item\",onClick:event=>setGender(FigureData.FEMALE),children:/*#__PURE__*/_jsx(AvatarEditorIcon,{icon:\"female\",selected:gender===FigureData.FEMALE})})]}),!model.canSetGender&&model.categories&&model.categories.size>0&&Array.from(model.categories.keys()).map(name=>{const category=model.categories.get(name);return/*#__PURE__*/_jsx(Flex,{center:true,pointer:true,className:\"category-item\",onClick:event=>selectCategory(name),children:/*#__PURE__*/_jsx(AvatarEditorIcon,{icon:category.name,selected:activeCategory===category})},name);})]}),/*#__PURE__*/_jsx(Column,{size:5,overflow:\"hidden\",children:/*#__PURE__*/_jsx(AvatarEditorFigureSetView,{model:model,category:activeCategory,setMaxPaletteCount:setMaxPaletteCount})}),/*#__PURE__*/_jsxs(Column,{size:5,overflow:\"hidden\",children:[maxPaletteCount>=1&&/*#__PURE__*/_jsx(AvatarEditorPaletteSetView,{model:model,category:activeCategory,paletteSet:activeCategory.getPalette(0),paletteIndex:0}),maxPaletteCount===2&&/*#__PURE__*/_jsx(AvatarEditorPaletteSetView,{model:model,category:activeCategory,paletteSet:activeCategory.getPalette(1),paletteIndex:1})]})]});};","map":null,"metadata":{},"sourceType":"module"}