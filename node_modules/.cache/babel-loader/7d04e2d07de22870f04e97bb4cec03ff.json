{"ast":null,"code":"import{useEffect,useMemo,useState}from'react';import{AutoSizer,List}from'react-virtualized';import{GetSessionDataManager,LocalizeText}from'../../../../api';import{Column,Flex,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../../common';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export const ChooserWidgetView=props=>{const{title=null,items=[],selectItem=null,onClose=null}=props;const[selectedItem,setSelectedItem]=useState(null);const[searchValue,setSearchValue]=useState('');const canSeeId=GetSessionDataManager().isModerator;const filteredItems=useMemo(()=>{const value=searchValue.toLocaleLowerCase();return items.filter(item=>item.name.toLocaleLowerCase().includes(value));},[items,searchValue]);const rowRenderer=props=>{const item=filteredItems[props.index];return/*#__PURE__*/_jsx(Flex,{alignItems:\"center\",position:\"absolute\",className:'rounded px-1'+(selectedItem===item?' bg-muted':''),pointer:true,style:props.style,onClick:event=>setSelectedItem(item),children:/*#__PURE__*/_jsxs(Text,{truncate:true,children:[item.name,\" \",canSeeId&&' - '+item.id]})},props.key);};useEffect(()=>{if(!selectedItem)return;selectItem(selectedItem);},[selectedItem,selectItem]);return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-chooser-widget\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:title,onCloseClick:onClose}),/*#__PURE__*/_jsxs(NitroCardContentView,{overflow:\"hidden\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",placeholder:LocalizeText('generic.search'),value:searchValue,onChange:event=>setSearchValue(event.target.value)}),/*#__PURE__*/_jsx(Column,{fullHeight:true,overflow:\"auto\",children:/*#__PURE__*/_jsx(AutoSizer,{defaultWidth:0,defaultHeight:0,children:_ref=>{let{width,height}=_ref;return/*#__PURE__*/_jsx(List,{width:width,height:height,rowCount:filteredItems.length,rowHeight:20,rowRenderer:rowRenderer});}})})]})]});};","map":null,"metadata":{},"sourceType":"module"}