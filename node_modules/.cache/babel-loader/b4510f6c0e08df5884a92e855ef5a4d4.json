{"ast":null,"code":"import{useEffect,useState}from'react';import{CreateRoomSession,DoorStateType,GoToDesktop,LocalizeText}from'../../../api';import{Button,Column,NitroCardContentView,NitroCardHeaderView,NitroCardView,Text}from'../../../common';import{useNavigator}from'../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const VISIBLE_STATES=[DoorStateType.START_DOORBELL,DoorStateType.STATE_WAITING,DoorStateType.STATE_NO_ANSWER,DoorStateType.START_PASSWORD,DoorStateType.STATE_WRONG_PASSWORD];const DOORBELL_STATES=[DoorStateType.START_DOORBELL,DoorStateType.STATE_WAITING,DoorStateType.STATE_NO_ANSWER];const PASSWORD_STATES=[DoorStateType.START_PASSWORD,DoorStateType.STATE_WRONG_PASSWORD];export const NavigatorDoorStateView=props=>{const[password,setPassword]=useState('');const{doorData=null,setDoorData=null}=useNavigator();const onClose=()=>{if(doorData&&doorData.state===DoorStateType.STATE_WAITING)GoToDesktop();setDoorData(null);};const ring=()=>{if(!doorData||!doorData.roomInfo)return;CreateRoomSession(doorData.roomInfo.roomId);setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_PENDING_SERVER;return newValue;});};const tryEntering=()=>{if(!doorData||!doorData.roomInfo)return;CreateRoomSession(doorData.roomInfo.roomId,password);setDoorData(prevValue=>{const newValue={...prevValue};newValue.state=DoorStateType.STATE_PENDING_SERVER;return newValue;});};useEffect(()=>{if(!doorData||doorData.state!==DoorStateType.STATE_NO_ANSWER)return;GoToDesktop();},[doorData]);if(!doorData||doorData.state===DoorStateType.NONE||VISIBLE_STATES.indexOf(doorData.state)===-1)return null;const isDoorbell=DOORBELL_STATES.indexOf(doorData.state)>=0;return/*#__PURE__*/_jsxs(NitroCardView,{className:\"nitro-navigator-doorbell\",theme:\"primary-slim\",children:[/*#__PURE__*/_jsx(NitroCardHeaderView,{headerText:LocalizeText(isDoorbell?'navigator.doorbell.title':'navigator.password.title'),onCloseClick:onClose}),/*#__PURE__*/_jsxs(NitroCardContentView,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{bold:true,children:doorData&&doorData.roomInfo&&doorData.roomInfo.roomName}),doorData.state===DoorStateType.START_DOORBELL&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.doorbell.info')}),doorData.state===DoorStateType.STATE_WAITING&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.doorbell.waiting')}),doorData.state===DoorStateType.STATE_NO_ANSWER&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.doorbell.no.answer')}),doorData.state===DoorStateType.START_PASSWORD&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.password.info')}),doorData.state===DoorStateType.STATE_WRONG_PASSWORD&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.password.retryinfo')})]}),isDoorbell&&/*#__PURE__*/_jsxs(Column,{gap:1,children:[doorData.state===DoorStateType.START_DOORBELL&&/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:ring,children:LocalizeText('navigator.doorbell.button.ring')}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:onClose,children:LocalizeText('generic.cancel')})]}),!isDoorbell&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.password.enter')}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control form-control-sm\",onChange:event=>setPassword(event.target.value)})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Button,{variant:\"success\",onClick:tryEntering,children:LocalizeText('navigator.password.button.try')}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",onClick:onClose,children:LocalizeText('generic.cancel')})]})]})]})]});};","map":null,"metadata":{},"sourceType":"module"}