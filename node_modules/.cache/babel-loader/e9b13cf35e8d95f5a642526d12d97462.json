{"ast":null,"code":"import{GetGuestRoomResultEvent,RateFlatMessageComposer}from'@nitrots/nitro-renderer';import classNames from'classnames';import{useEffect,useState}from'react';import{CreateLinkEvent,GetRoomEngine,LocalizeText,SendMessageComposer}from'../../../../api';import{Base,Column,Flex,Text,TransitionAnimation,TransitionAnimationTypes}from'../../../../common';import{useMessageEvent,useNavigator,useRoom}from'../../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const RoomToolsWidgetView=props=>{const[isZoomedIn,setIsZoomedIn]=useState(false);const[roomName,setRoomName]=useState(null);const[roomOwner,setRoomOwner]=useState(null);const[roomTags,setRoomTags]=useState(null);const[isOpen,setIsOpen]=useState(false);const{navigatorData=null}=useNavigator();const{roomSession=null}=useRoom();const handleToolClick=action=>{switch(action){case'settings':CreateLinkEvent('navigator/toggle-room-info');return;case'zoom':setIsZoomedIn(prevValue=>{let scale=GetRoomEngine().getRoomInstanceRenderingCanvasScale(roomSession.roomId,1);if(!prevValue)scale/=2;else scale*=2;GetRoomEngine().setRoomInstanceRenderingCanvasScale(roomSession.roomId,1,scale);return!prevValue;});return;case'chat_history':CreateLinkEvent('chat-history/toggle');return;case'like_room':SendMessageComposer(new RateFlatMessageComposer(1));return;case'toggle_room_link':CreateLinkEvent('navigator/toggle-room-link');return;}};useMessageEvent(GetGuestRoomResultEvent,event=>{const parser=event.getParser();if(!parser.roomEnter||parser.data.roomId!==roomSession.roomId)return;if(roomName!==parser.data.roomName)setRoomName(parser.data.roomName);if(roomOwner!==parser.data.ownerName)setRoomOwner(parser.data.ownerName);if(roomTags!==parser.data.tags)setRoomTags(parser.data.tags);});useEffect(()=>{setIsOpen(true);const timeout=setTimeout(()=>setIsOpen(false),5000);return()=>clearTimeout(timeout);},[roomName,roomOwner,roomTags]);return/*#__PURE__*/_jsxs(Flex,{className:\"nitro-room-tools-container\",gap:2,children:[/*#__PURE__*/_jsxs(Column,{center:true,className:\"nitro-room-tools p-2\",children:[/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.settings.button.text'),className:\"icon icon-cog\",onClick:()=>handleToolClick('settings')}),/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.zoom.button.text'),onClick:()=>handleToolClick('zoom'),className:'icon '+classNames({'icon-zoom-less':!isZoomedIn,'icon-zoom-more':isZoomedIn})}),/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.chathistory.button.text'),onClick:()=>handleToolClick('chat_history'),className:\"icon icon-chat-history\"}),navigatorData.canRate&&/*#__PURE__*/_jsx(Base,{pointer:true,title:LocalizeText('room.like.button.text'),onClick:()=>handleToolClick('like_room'),className:\"icon icon-like-room\"})]}),/*#__PURE__*/_jsx(Column,{justifyContent:\"center\",children:/*#__PURE__*/_jsx(TransitionAnimation,{type:TransitionAnimationTypes.SLIDE_LEFT,inProp:isOpen,timeout:300,children:/*#__PURE__*/_jsx(Column,{center:true,children:/*#__PURE__*/_jsxs(Column,{className:\"nitro-room-tools-info rounded py-2 px-3\",children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{wrap:true,variant:\"white\",fontSize:4,children:roomName}),/*#__PURE__*/_jsx(Text,{variant:\"muted\",fontSize:5,children:roomOwner})]}),roomTags&&roomTags.length>0&&/*#__PURE__*/_jsx(Flex,{gap:2,children:roomTags.map((tag,index)=>/*#__PURE__*/_jsxs(Text,{small:true,variant:\"white\",className:\"rounded bg-primary p-1\",children:[\"#\",tag]},index))})]})})})})]});};","map":null,"metadata":{},"sourceType":"module"}