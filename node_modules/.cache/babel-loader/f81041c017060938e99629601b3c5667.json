{"ast":null,"code":"import{RoomObjectType}from'@nitrots/nitro-renderer';import{useMemo,useState}from'react';import{ChatEntryType,GetSessionDataManager,LocalizeText,ReportState}from'../../../api';import{AutoGrid,Button,Column,Flex,LayoutGridItem,Text}from'../../../common';import{useChatHistory,useHelp}from'../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export const SelectReportedUserView=props=>{const[selectedUserId,setSelectedUserId]=useState(-1);const{chatHistory=[]}=useChatHistory();const{activeReport=null,setActiveReport=null}=useHelp();const availableUsers=useMemo(()=>{const users=new Map();chatHistory.forEach(chat=>{if(chat.type===ChatEntryType.TYPE_CHAT&&chat.entityType===RoomObjectType.USER&&chat.entityId!==GetSessionDataManager().userId&&!users.has(chat.entityId))users.set(chat.entityId,{id:chat.entityId,username:chat.name});});return Array.from(users.values());},[chatHistory]);const submitUser=()=>{if(selectedUserId<=0)return;setActiveReport(prevValue=>{return{...prevValue,reportedUserId:selectedUserId,currentStep:ReportState.SELECT_CHATS};});};const selectUser=userId=>{setSelectedUserId(prevValue=>{if(userId===prevValue)return-1;return userId;});};const back=()=>{setActiveReport(prevValue=>{return{...prevValue,currentStep:prevValue.currentStep-1};});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{fontSize:4,children:LocalizeText('help.emergency.main.step.two.title')}),availableUsers.length>0&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('report.user.pick.user')})]}),/*#__PURE__*/_jsxs(Column,{gap:1,overflow:\"hidden\",children:[!!!availableUsers.length&&/*#__PURE__*/_jsx(Text,{children:LocalizeText('report.user.error.nolist')}),availableUsers.length>0&&/*#__PURE__*/_jsx(AutoGrid,{columnCount:1,columnMinHeight:25,gap:1,children:availableUsers.map((user,index)=>{return/*#__PURE__*/_jsx(LayoutGridItem,{onClick:event=>selectUser(user.id),itemActive:selectedUserId===user.id,children:/*#__PURE__*/_jsx(\"span\",{dangerouslySetInnerHTML:{__html:user.username}})},user.id);})})]}),/*#__PURE__*/_jsxs(Flex,{gap:2,justifyContent:\"between\",children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:back,children:LocalizeText('generic.back')}),/*#__PURE__*/_jsx(Button,{disabled:selectedUserId<=0,onClick:submitUser,children:LocalizeText('help.emergency.main.submit.button')})]})]});};","map":null,"metadata":{},"sourceType":"module"}