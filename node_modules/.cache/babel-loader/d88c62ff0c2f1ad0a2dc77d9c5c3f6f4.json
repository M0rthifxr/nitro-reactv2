{"ast":null,"code":"/* eslint-disable no-template-curly-in-string */import{CreateFlatMessageComposer,HabboClubLevelEnum}from'@nitrots/nitro-renderer';import{useEffect,useState}from'react';import{GetClubMemberLevel,GetConfiguration,LocalizeText,SendMessageComposer}from'../../../api';import{Button,Column,Flex,Grid,LayoutCurrencyIcon,LayoutGridItem,Text}from'../../../common';import{useNavigator}from'../../../hooks';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export const NavigatorRoomCreatorView=props=>{const[maxVisitorsList,setMaxVisitorsList]=useState(null);const[name,setName]=useState(null);const[description,setDescription]=useState(null);const[category,setCategory]=useState(null);const[visitorsCount,setVisitorsCount]=useState(null);const[tradesSetting,setTradesSetting]=useState(0);const[roomModels,setRoomModels]=useState([]);const[selectedModelName,setSelectedModelName]=useState('');const{categories=null}=useNavigator();const hcDisabled=GetConfiguration('hc.disabled',false);const getRoomModelImage=name=>GetConfiguration('images.url')+`/navigator/models/model_${name}.png`;const selectModel=(model,index)=>{if(!model||model.clubLevel>GetClubMemberLevel())return;setSelectedModelName(roomModels[index].name);};const createRoom=()=>{SendMessageComposer(new CreateFlatMessageComposer(name,description,'model_'+selectedModelName,Number(category),Number(visitorsCount),tradesSetting));};useEffect(()=>{if(!maxVisitorsList){const list=[];for(let i=10;i<=100;i=i+10)list.push(i);setMaxVisitorsList(list);setVisitorsCount(list[0]);}},[maxVisitorsList]);useEffect(()=>{if(categories&&categories.length)setCategory(categories[0].id);},[categories]);useEffect(()=>{const models=GetConfiguration('navigator.room.models');if(models&&models.length){setRoomModels(models);setSelectedModelName(models[0].name);}},[]);return/*#__PURE__*/_jsxs(Column,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Grid,{overflow:\"hidden\",children:[/*#__PURE__*/_jsxs(Column,{size:6,gap:1,overflow:\"auto\",children:[/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.createroom.roomnameinfo')}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",maxLength:60,onChange:event=>setName(event.target.value),placeholder:LocalizeText('navigator.createroom.roomnameinfo')})]}),/*#__PURE__*/_jsxs(Column,{grow:true,gap:1,children:[/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.createroom.roomdescinfo')}),/*#__PURE__*/_jsx(\"textarea\",{className:\"flex-grow-1 form-control form-control-sm w-100\",maxLength:255,onChange:event=>setDescription(event.target.value),placeholder:LocalizeText('navigator.createroom.roomdescinfo')})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.category')}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setCategory(Number(event.target.value)),children:categories&&categories.length>0&&categories.map(category=>{return/*#__PURE__*/_jsx(\"option\",{value:category.id,children:LocalizeText(category.name)},category.id);})})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.maxvisitors')}),/*#__PURE__*/_jsx(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setVisitorsCount(Number(event.target.value)),children:maxVisitorsList&&maxVisitorsList.map(value=>{return/*#__PURE__*/_jsx(\"option\",{value:value,children:value},value);})})]}),/*#__PURE__*/_jsxs(Column,{gap:1,children:[/*#__PURE__*/_jsx(Text,{children:LocalizeText('navigator.tradesettings')}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select form-select-sm\",onChange:event=>setTradesSetting(Number(event.target.value)),children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:LocalizeText('navigator.roomsettings.trade_not_allowed')}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:LocalizeText('navigator.roomsettings.trade_not_with_Controller')}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:LocalizeText('navigator.roomsettings.trade_allowed')})]})]})]}),/*#__PURE__*/_jsx(Column,{size:6,gap:1,overflow:\"auto\",children:roomModels.map((model,index)=>{return/*#__PURE__*/_jsxs(LayoutGridItem,{fullHeight:true,onClick:()=>selectModel(model,index),itemActive:selectedModelName===model.name,overflow:\"unset\",gap:0,className:\"p-1\",disabled:GetClubMemberLevel()<model.clubLevel,children:[/*#__PURE__*/_jsx(Flex,{fullHeight:true,center:true,overflow:\"hidden\",children:/*#__PURE__*/_jsx(\"img\",{alt:\"\",src:getRoomModelImage(model.name)})}),/*#__PURE__*/_jsxs(Text,{bold:true,children:[model.tileSize,\" \",LocalizeText('navigator.createroom.tilesize')]}),!hcDisabled&&model.clubLevel>HabboClubLevelEnum.NO_CLUB&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{position:\"absolute\",className:\"top-1 end-1\",type:\"hc\"})]},model.name);})})]}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:!name||name.length<3?'danger':'success',onClick:createRoom,disabled:!name||name.length<3,children:LocalizeText('navigator.createroom.create')})]});};","map":null,"metadata":{},"sourceType":"module"}