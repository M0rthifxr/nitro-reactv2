{"ast":null,"code":"import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{AvatarAction,AvatarExpressionEnum,RoomControllerLevel,RoomObjectCategory,RoomUnitDropHandItemComposer}from'@nitrots/nitro-renderer';import{useState}from'react';import{CreateLinkEvent,DispatchUiEvent,GetCanStandUp,GetCanUseExpression,GetOwnPosture,GetUserProfile,HasHabboClub,HasHabboVip,IsRidingHorse,LocalizeText,PostureTypeEnum,SendMessageComposer}from'../../../../../api';import{Flex,LayoutCurrencyIcon}from'../../../../../common';import{HelpNameChangeEvent}from'../../../../../events';import{useRoom}from'../../../../../hooks';import{ContextMenuHeaderView}from'../../context-menu/ContextMenuHeaderView';import{ContextMenuListItemView}from'../../context-menu/ContextMenuListItemView';import{ContextMenuView}from'../../context-menu/ContextMenuView';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const MODE_NORMAL=0;const MODE_CLUB_DANCES=1;const MODE_NAME_CHANGE=2;const MODE_EXPRESSIONS=3;const MODE_SIGNS=4;export const AvatarInfoWidgetOwnAvatarView=props=>{const{avatarInfo=null,isDancing=false,setIsDecorating=null,onClose=null}=props;const[mode,setMode]=useState(isDancing&&HasHabboClub()?MODE_CLUB_DANCES:MODE_NORMAL);const{roomSession=null}=useRoom();const processAction=name=>{let hideMenu=true;if(name){if(name.startsWith('sign_')){const sign=parseInt(name.split('_')[1]);roomSession.sendSignMessage(sign);}else{switch(name){case'decorate':setIsDecorating(true);break;case'change_name':DispatchUiEvent(new HelpNameChangeEvent(HelpNameChangeEvent.INIT));break;case'change_looks':CreateLinkEvent('avatar-editor/show');break;case'expressions':hideMenu=false;setMode(MODE_EXPRESSIONS);break;case'sit':roomSession.sendPostureMessage(PostureTypeEnum.POSTURE_SIT);break;case'stand':roomSession.sendPostureMessage(PostureTypeEnum.POSTURE_STAND);break;case'wave':roomSession.sendExpressionMessage(AvatarExpressionEnum.WAVE.ordinal);break;case'blow':roomSession.sendExpressionMessage(AvatarExpressionEnum.BLOW.ordinal);break;case'laugh':roomSession.sendExpressionMessage(AvatarExpressionEnum.LAUGH.ordinal);break;case'idle':roomSession.sendExpressionMessage(AvatarExpressionEnum.IDLE.ordinal);break;case'dance_menu':hideMenu=false;setMode(MODE_CLUB_DANCES);break;case'dance':roomSession.sendDanceMessage(1);break;case'dance_stop':roomSession.sendDanceMessage(0);break;case'dance_1':case'dance_2':case'dance_3':case'dance_4':roomSession.sendDanceMessage(parseInt(name.charAt(name.length-1)));break;case'signs':hideMenu=false;setMode(MODE_SIGNS);break;case'back':hideMenu=false;setMode(MODE_NORMAL);break;case'drop_carry_item':SendMessageComposer(new RoomUnitDropHandItemComposer());break;}}}if(hideMenu)onClose();};const isShowDecorate=()=>avatarInfo.amIOwner||avatarInfo.amIAnyRoomController||avatarInfo.roomControllerLevel>RoomControllerLevel.GUEST;const isRidingHorse=IsRidingHorse();return/*#__PURE__*/_jsxs(ContextMenuView,{objectId:avatarInfo.roomIndex,category:RoomObjectCategory.UNIT,userType:avatarInfo.userType,onClose:onClose,collapsable:true,children:[/*#__PURE__*/_jsx(ContextMenuHeaderView,{className:\"cursor-pointer\",onClick:event=>GetUserProfile(avatarInfo.webID),children:avatarInfo.name}),mode===MODE_NORMAL&&/*#__PURE__*/_jsxs(_Fragment,{children:[avatarInfo.allowNameChange&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('change_name'),children:LocalizeText('widget.avatar.change_name')}),isShowDecorate()&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('decorate'),children:LocalizeText('widget.avatar.decorate')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('change_looks'),children:LocalizeText('widget.memenu.myclothes')}),HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/_jsxs(ContextMenuListItemView,{onClick:event=>processAction('dance_menu'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"chevron-right\",className:\"right\"}),LocalizeText('widget.memenu.dance')]}),!isDancing&&!HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance'),children:LocalizeText('widget.memenu.dance')}),isDancing&&!HasHabboClub()&&!isRidingHorse&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_stop'),children:LocalizeText('widget.memenu.dance.stop')}),/*#__PURE__*/_jsxs(ContextMenuListItemView,{onClick:event=>processAction('expressions'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"chevron-right\",className:\"right\"}),LocalizeText('infostand.link.expressions')]}),/*#__PURE__*/_jsxs(ContextMenuListItemView,{onClick:event=>processAction('signs'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"chevron-right\",className:\"right\"}),LocalizeText('infostand.show.signs')]}),avatarInfo.carryItem>0&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('drop_carry_item'),children:LocalizeText('avatar.widget.drop_hand_item')})]}),mode===MODE_CLUB_DANCES&&/*#__PURE__*/_jsxs(_Fragment,{children:[isDancing&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_stop'),children:LocalizeText('widget.memenu.dance.stop')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_1'),children:LocalizeText('widget.memenu.dance1')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_2'),children:LocalizeText('widget.memenu.dance2')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_3'),children:LocalizeText('widget.memenu.dance3')}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('dance_4'),children:LocalizeText('widget.memenu.dance4')}),/*#__PURE__*/_jsxs(ContextMenuListItemView,{onClick:event=>processAction('back'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]}),mode===MODE_EXPRESSIONS&&/*#__PURE__*/_jsxs(_Fragment,{children:[GetOwnPosture()===AvatarAction.POSTURE_STAND&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sit'),children:LocalizeText('widget.memenu.sit')}),GetCanStandUp()&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('stand'),children:LocalizeText('widget.memenu.stand')}),GetCanUseExpression()&&/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('wave'),children:LocalizeText('widget.memenu.wave')}),GetCanUseExpression()&&/*#__PURE__*/_jsxs(ContextMenuListItemView,{disabled:!HasHabboVip(),onClick:event=>processAction('laugh'),children:[!HasHabboVip()&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{type:\"hc\"}),LocalizeText('widget.memenu.laugh')]}),GetCanUseExpression()&&/*#__PURE__*/_jsxs(ContextMenuListItemView,{disabled:!HasHabboVip(),onClick:event=>processAction('blow'),children:[!HasHabboVip()&&/*#__PURE__*/_jsx(LayoutCurrencyIcon,{type:\"hc\"}),LocalizeText('widget.memenu.blow')]}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('idle'),children:LocalizeText('widget.memenu.idle')}),/*#__PURE__*/_jsxs(ContextMenuListItemView,{onClick:event=>processAction('back'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]}),mode===MODE_SIGNS&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_1'),children:\"1\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_2'),children:\"2\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_3'),children:\"3\"})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_4'),children:\"4\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_5'),children:\"5\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_6'),children:\"6\"})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_7'),children:\"7\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_8'),children:\"8\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_9'),children:\"9\"})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_10'),children:\"10\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_11'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-heart\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_12'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-skull\"})})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_0'),children:\"0\"}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_13'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-exclamation\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_15'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-smile\"})})]}),/*#__PURE__*/_jsxs(Flex,{className:\"menu-list-split-3\",children:[/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_14'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-soccer\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_17'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-yellow\"})}),/*#__PURE__*/_jsx(ContextMenuListItemView,{onClick:event=>processAction('sign_16'),children:/*#__PURE__*/_jsx(\"i\",{className:\"icon icon-sign-red\"})})]}),/*#__PURE__*/_jsxs(ContextMenuListItemView,{onClick:event=>processAction('back'),children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:\"chevron-left\",className:\"left\"}),LocalizeText('generic.back')]})]})]});};","map":null,"metadata":{},"sourceType":"module"}